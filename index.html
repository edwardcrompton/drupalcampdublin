<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>A foundation in Drupal development with Docker</title>
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- ALL SLIDES GO HERE -->
        <!-- Each section element contains an individual slide -->
        <section>
          <h1>A foundation in Docker</h1>
          <p>Ed Crompton, Oxfam International</p>
          <img class="plain" src="images/logo.png" />
          <div>
            <small>Twitter: @ed_crompton</small>
            <br />
            <small>Drupal.org: eddie_c</small>
          </div>
        </section>

        <section class="left-align">
          <h2>The basis of this talk</h2>
          <div style="float: left; width: 70%">
          <p>Docker holds potential for easier Drupal development and
            deployment.</p>
          <p>A barrier to using Docker is understanding containerisation
            concepts.</p>
          <p>I'll tell you 4 'Ah ha' moments I had that helped me
            understand Docker better.</p>
          </div>
          <div style="float: right; width: 30%">
            <img class="plain" src="images/6098039190_1432b7c594_o.jpg" />
          </div>
          <small>https://flic.kr/p/ahS3AJ</small>
        </section>

        <section class="left-align">
          <h2>What’s a container?</h2>
          <p>Docker utilises Linux ‘containers’.</p>
          <p>Redhat says:</p>
          <blockquote>
          "Linux containers are technologies that allow you to package and isolate applications with their entire runtime environment—all of the files necessary to run. This makes it easy to move the contained application between environments (dev, test, production, etc.) while retaining full functionality."</blockquote>
          <small>https://www.redhat.com/en/topics/containers</small>
        </section>

        <section class="left-align">
          <h2>Why are containers special?</h2>
          <div style="float: left; width: 65%">
            <p>Containers are designed to run a process in an isolated, controlled environment and then exit.</p>
            <p>Containers don't require their own operating system to run.</p>
          </div>

          <div style="float: right; width: 35%">
            <img class="plain" src="images/15229379983_97062ec16e_b.jpg" />
            <small>https://flic.kr/p/pcLy5X</small>
          </div>
        </section>

        <section>
          <h2>Some Docker commands</h2>

          <pre><code>docker pull [image]</code></pre>
          <pre><code>docker ps -a</code></pre>
          <pre><code>docker run [image] [command]</code></pre>


        </section>

        <section>
          <h2>Running a command and exiting</h2>
          <video data-autoplay data-src="videos/docker-1.ogv"></video>
        </section>

        <section>
          <h2>Running a daemon continuously</h2>
          <video data-autoplay data-src="videos/docker-2.ogv"></video>
        </section>

        <section class="left-align">
          <h2>Ah ha! Moment 1</h2>
          <div style="float: left; width:65%">
          <p>Containers are disposable: A container may only run for as long as
          the process within it.</p>
          </div>
          <div style="float: right; width: 35%">
            <img class="plain" src="images/4711849406_c9b1988bf3_b.jpg" />
            <small>https://flic.kr/p/8bnsES</small>
          </div>
        </section>

        <section class="left-align">
          <h2>Namespaces</h2>
          <p>A primary component of 'containers' are PID namespaces in Linux.</p>
          <blockquote>"Because of namespaces, each docker container appears to have its own filesystem and network."</blockquote>
          <small>https://hackernoon.com/the-curious-case-of-pid-namespaces-1ce86b6bc900</small>
        </section>

        <section>
          <h2>Process identifier (PID) namespaces
          <video data-autoplay data-src="videos/docker-3.ogv"></video>
        </section>

        <section class="left-align">
          <h2>Ah ha! Moment 2</h2>
          <div style="float: left; width: 65%">
            <p>Containers are not isolated operating systems, they are isolated
            by namespace.</p>
          </div>
          <div style="float: right; width: 35%">
            <img class="plain" src="images/32777596874_fadc2d1905_k.jpg" />
          </div>
        </section>

        <section>
          <h2>Something useful: Nginx</h2>
          <video data-autoplay data-src="videos/docker-4.ogv"></video>
        </section>

        <section class="left-align">
          <h2>Ah ha! Moment 3</h2>
          <p>Containers should only perform one role.</p>
          <p>Docker follows the UNIX philosophy: "Do one thing and do it well".</p>
        </section>

        <section class="left-align">
          <h2>Docker run</h2>
          <p>So far we’ve been using one command to run a container.</p>
          <pre><code>docker run ...</code></pre>
          <p>Books and tutorials often teach Docker using this command predominantly.</p>
          <p>But how can we run more complex multi-container systems?</p>
        </section>

        <section class="left-align">
          <h2>Ah ha! Moment 4</h2>
          <div style="float: left; width: 65%">
          <p>Docker run is not an efficient way of working with multi-container
            systems.</p>
          <p>There are other tools.</p>
          </div>
          <div style="float: right; width: 35%">
            <img class="plain" src="images/12182919023_9df60e5404_k.jpg" />
            <small>https://flic.kr/p/jyyDnZ</small>
          </div>
        </section>

        <section class="left-align">
          <h2>Controlling multiple Docker containers</h2>
          <p>docker-compose is the tool for this.</p>
          <p>docker-compose takes its orders from a docker-compose.yml file.</p>
        </section>

        <section>
          <h2>docker-compose.yml</h2>
          <img class="plain" src="images/screenshot-1.png" />
        </section>

        <section>
          <h2>Summary</h2>
          <ul>
            <li>Containers are ephemeral: Containers only need to last as long
              as the process within it.</li>
            <li>Containers are part of the host system but separate. They have
              separate process id namespaces and filesystems.</li>
            <li>Containers should perform one role well. They may sometimes run
              different processes, but always just perform one role.</li>
            <li>Use docker-compose to control multi-container Docker containers
              and build something useful!</li>
          </ul>
        </section>

        <section class="left-align">
          <h2>What next?</h2>
          <p>Prakhar Srivastav’s Beginner’s Tutorial: <br />https://docker-curriculum.com/</p>
          <p>Socket Wench’s Talk at Drupal Con Dublin 2016: <br />https://youtu.be/DevIohAnkDI</p>
          <p>Let’s chat about Xdebug and using networks with docker-compose.</p>
        </section>

        <section>
          <h2>Thank you!</h2>
          <p>Any questions?</p>

          <p>Ed Crompton, Oxfam International</p>
          <img class="plain" src="images/logo.png" />
          <div>
            <small>Twitter: @ed_crompton</small>
            <br />
            <small>Drupal.org: eddie_c</small>
          </div>
        </section>

			</div>
		</div>
		<script src="js/reveal.js"></script>
		<script>
			Reveal.initialize();
		</script>
	</body>
</html>